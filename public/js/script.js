function getStatusAbbreviation(e){return{"To Be Confirmed":"DO POTWIERDZENIA","Go for Launch":"DATA POTWIERDZONA","To Be Determined":"DO USTALENIA","Launch was a Partial Failure":"CZĘŚCIOWA PORAŻKA","Launch Successful":"Pomyślny start","Launch Failure":"Nieudany start","On Hold":"START WSTRZYMANY","Launch in Flight":"Lot w trakcie"}[e]||e}function translateLaunch(e){return{"Air launch to Suborbital flight":"Start w powietrzu","SpaceX Space Launch Facility":"SpaceX Starbase","Vandenberg SFB":"Vandenberg Space Force Base","Onenui Station":"Rocket Lab Launch Complex 1","Wallops Island":"Mid-Atlantic Regional Spaceport","Cape Canaveral":"Cape Canaveral Space Force Station","Pacific Spaceport Complex":"Pacific Spaceport Complex – Alaska"}[e]||e}function poprawaMisji(e){const a={"Unknown Payload":"Ładunek nieznany","Vostochny Angara Test Flight":"Angara Test Flight"},t={"Space Mission":"","CST-100 Starliner Crewed Flight Test":"Boeing Crewed Flight Test"};let n=e;Object.keys(t).forEach((e=>{n=n.replace(new RegExp(e,"g"),t[e])})),n=n.replace(/\bCRS-\d+\b/g,""),n=n.replace(/nk\b Group/g,"nk Grupa"),n=n.replace(/Integrated Flight Test (\d+)/g,"Starhip Flight Test $1");const i=n.replace(/FLTA\d+\s*/,""),r=i.match(/Dragon CRS-2 SpX-(\d+)/);return r?"CRS-"+r[1]:a[e]||i}function skrotAgencji(e){return{"China Aerospace Science and Technology Corporation":"CASC","Indian Space Research Organization":"ISRO","Russian Federal Space Agency (ROSCOSMOS)":"ROSCOSMOS","Russian Space Forces":"Rosyjskie Siły Kosmiczne","United Launch Alliance":"ULA","Mitsubishi Heavy Industries":"MHI"}[e]||e}function brakOrbity(e){return{"N/A":"BRAK INFORMACJI",Sub:"LOT SUBORBITALNY",Elliptical:"ELIPTYCZNA",PO:"POLARNA",LO:"KSIĘŻYCOWA"}[e]||e}function fetchData(){const e=localStorage.getItem("cachedData"),a=localStorage.getItem("cachedTimestamp");if(e){const t=JSON.parse(e);if((new Date).getTime()-a<=9e5)return void displayLaunchData(t.results)}fetch("https://ll.thespacedevs.com/2.2.0/launch/upcoming/?mode=detailed&limit=16").then((e=>e.json())).then((e=>{localStorage.setItem("cachedData",JSON.stringify(e)),localStorage.setItem("cachedTimestamp",(new Date).getTime()),displayLaunchData(e.results)}))}function displayLaunchData(e){const a=document.getElementById("app");a.innerHTML="",e.sort(((e,a)=>new Date(e.net)-new Date(a.net))),e.forEach((e=>{if(e.mission){const n=document.createElement("article");n.className="start",NProgress.start(),n.onloadend=NProgress.done();const i=e.rocket.configuration.name,r=poprawaMisji(e.mission.name.replace(/\(([^)]+)\)/g,""));const c=function(e){const a=e.indexOf("/");return-1!==a?e.substring(0,a):e}(i),o=document.createElement("p");o.textContent=`${c}`,o.className="nazwaRakiety";const l=document.createElement("p");l.textContent=null===r||""===r?"Nie ustalono":`${r}`,l.className="nazwaMisji",l.id="nazwaMisji";const s=getStatusAbbreviation(e.status.name),d=document.createElement("p");d.textContent=`${s}`,d.className="status";const p=translateLaunch(e.pad.location.name.split(",")[0]),g=document.createElement("a");g.className="las la-map-marked-alt",g.id="map",g.href="Start w powietrzu"==p?"https://en.wikipedia.org/wiki/Air_launch":"https://en.wikipedia.org/wiki/"+p,tippy(g,{content:`<center>${p} na Wikipedii</center>`,placement:"top",allowHTML:!0});const u=document.createElement("a");u.className="las la-rocket",u.id="rocketIcon",u.href="https://en.wikipedia.org/wiki/"+i,tippy(u,{content:`<center>${i} na Wikipedii</center>`,placement:"top",allowHTML:!0});const m=document.createElement("a");m.id="streamIcon";const S=document.createElement("div");S.id=`countdown-${e.id}`;const h=document.createElement("div");h.className="info",e.image?n.style.backgroundImage=`linear-gradient(106deg, rgba(157, 80, 187, 0.60) -0.02%, rgba(110, 72, 170, 0.60) 99.98%), url(${e.image})`:n.style.backgroundImage="url(./public/img/brak.png)";const T=document.createElement("div");function t(){const a=(new Date).getTime(),t=new Date(e.net).getTime()-a,i=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),c=Math.floor(t%36e5/6e4),o=Math.floor(t%6e4/1e3),l=String(i).padStart(2,"0"),p=String(r).padStart(2,"0"),g=String(c).padStart(2,"0"),u=String(o).padStart(2,"0"),m=new Date(e.net),h=m.getDate(),b=m.getFullYear(),A=["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","września","października","listopada","grudnia"][m.getMonth()],C=m.getHours(),w=m.getMinutes(),k=String(C).padStart(2,"0"),L=String(w).padStart(2,"0");let y=`<p id="czasElement">${l}:${p}:${g}:${u}</p>`;1===i&&(y=`<p id="czasElement">${l}:${p}:${g}:${u}</p>`),i>2&&(y=`<p id="czasElement">Start za ${i} dni</p>`),"DATA POTWIERDZONA"!==d.innerHTML&&(y=`<p id="czasElement">${s}</p>`),"Pomyślny start"===d.innerHTML&&(n.style.backgroundImage=`linear-gradient(106deg, rgba(110, 198, 118, 0.6) -0.02%, rgba(110, 72, 170, 0.6) 99.98%), url(${e.image})`),"Nieudany start"===d.innerHTML&&(n.style.backgroundImage=`linear-gradient(106deg, rgba(183, 65, 65, 0.6) -0.02%, rgba(110, 72, 170, 0.6) 99.98%), url(${e.image})`),"CZĘŚCIOWA PORAŻKA"===d.innerHTML&&(n.style.backgroundImage=`linear-gradient(106deg, rgba(183, 65, 65, 0.6) -0.02%, rgba(110, 72, 170, 0.6) 99.98%), url(${e.image})`),"START WSTRZYMANY"===d.innerHTML&&(n.style.backgroundImage=`linear-gradient(106deg, rgba(176, 177, 84, 0.6) -0.02%, rgba(110, 72, 170, 0.6) 99.98%), url(${e.image})`),"Lot w trakcie"===d.innerHTML&&(n.style.backgroundImage=`linear-gradient(106deg, rgba(88, 69, 96, 0.6) -0.02%, rgba(110, 72, 170, 0.6) 99.98%), url(${e.image})`),"Do potwierdzenia"===d.innerHTML&&(n.style.backgroundImage=`linear-gradient(106deg, rgba(88, 69, 96, 0.6) -0.02%, rgba(110, 72, 170, 0.6) 99.98%), url(${e.image})`),S.innerHTML=y,i<10&&tippy(T,{content:"<center>"+h+" "+A+" "+b+", "+k+":"+L+"</center>",placement:"top",allowHTML:!0})}T.className="czasDiv",T.id="czasDiv",n.appendChild(T),n.appendChild(m),m.appendChild(u),m.appendChild(g),n.appendChild(h),h.appendChild(l),h.appendChild(o),T.appendChild(S),a.appendChild(n),t(),setInterval(t,1e3)}}))}fetchData(),setInterval(fetchData,6e5);